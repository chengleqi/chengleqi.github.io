<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>服务网格简记 - chengleqi's blog</title><meta name=description content><meta property="og:title" content="服务网格简记"><meta property="og:description" content="注入容器！接管流量！"><meta property="og:type" content="article"><meta property="og:url" content="https://chengleqi.com/posts/22-02-28/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-28T21:05:07+08:00"><meta property="article:modified_time" content="2022-04-01T18:20:47+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="服务网格简记"><meta name=twitter:description content="注入容器！接管流量！"><meta name=application-name content="chengleqi's blog"><meta name=apple-mobile-web-app-title content="chengleqi's blog"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://chengleqi.com/posts/22-02-28/><link rel=prev href=https://chengleqi.com/posts/22-02-10/><link rel=next href=https://chengleqi.com/posts/22-03-16/><link rel=stylesheet href=/css/page.min.css><link rel=stylesheet href=/css/home.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"服务网格简记","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/chengleqi.com\/posts\/22-02-28\/"},"genre":"posts","keywords":"Network","wordcount":3214,"url":"https:\/\/chengleqi.com\/posts\/22-02-28\/","datePublished":"2022-02-28T21:05:07+08:00","dateModified":"2022-04-01T18:20:47+08:00","publisher":{"@type":"Organization","name":"chengleqi"},"author":{"@type":"Person","name":"chengleqi"},"description":""}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":''==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:''==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="chengleqi's blog">0x6B0873</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/about/>关于 </a><a class=menu-item href=https://github.com/chengleqi/chengleqi.github.io rel="noopener noreffer" target=_blank><i class="fab fa-github"></i> </a><a class=menu-item href=https://hub.docker.com/u/chengleqi rel="noopener noreffer" target=_blank><i class="fab fa-docker"></i> </a><a class=menu-item href=https://chengleqi.notion.site/Kubernetes-in-Action-b2706120ab174888817b1aa454cc8785 rel="noopener noreffer" target=_blank><i class="fas fa-spin fa-dharmachakra"></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=# class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a class=menu-item href=/index.xml title=RSS><i class="fas fa-rss fa-fw" title=RSS></i> </a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="chengleqi's blog">0x6B0873</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=# class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/about/ title>关于</a><a class=menu-item href=https://github.com/chengleqi/chengleqi.github.io title rel="noopener noreffer" target=_blank><i class="fab fa-github"></i></a><a class=menu-item href=https://hub.docker.com/u/chengleqi title rel="noopener noreffer" target=_blank><i class="fab fa-docker"></i></a><a class=menu-item href=https://chengleqi.notion.site/Kubernetes-in-Action-b2706120ab174888817b1aa454cc8785 title rel="noopener noreffer" target=_blank><i class="fas fa-spin fa-dharmachakra"></i></a><div class=menu-item><a href=/index.xml title=RSS><i class="fas fa-rss fa-fw" title=RSS></i></a>
<span>&nbsp;|&nbsp;</span><a href=javascript:void(0); class=theme-switch title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single" data-toc=disable><div class=single-card><h2 class="single-title animated flipInX">服务网格简记</h2><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>chengleqi</a></span>&nbsp;<span class=post-category>出版于 <a href=/categories/istio/><i class="far fa-folder fa-fw"></i>Istio</a></span></div><div class=post-meta-line><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-02-28>2022-02-28</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3214 字</span>&nbsp;
<span><i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 7 分钟</span>&nbsp;</div></div><hr><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#istio是什么>Istio是什么?</a></li><li><a href=#istio能做什么>Istio能做什么?</a></li><li><a href=#为什么需要istio>为什么需要Istio?</a></li><li><a href=#istio的缺点>Istio的缺点</a></li><li><a href=#istio和kubernetes>Istio和Kubernetes</a></li><li><a href=#istio小实践>Istio小实践</a><ul><li><a href=#部署>部署</a></li><li><a href=#测试>测试</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class=content id=content><p>注入容器！接管流量！</p><h2 id=istio是什么>Istio是什么?</h2><div class="details admonition quote open"><div class="details-summary admonition-title"><i class="icon fas fa-quote-right fa-fw"></i>《云原生服务网格Istio：原理、实践、架构与源码解析》 概述<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>云原生容器技术和微服务应用的出现，推动了人们对服务网格的需求。那么，什么是服务网格？简而言之，服务网格是服务（包括微服务）之间通信的控制器。随着越来越多的容器应用的开发和部署，一个企业可能会有成百上千或数以万计的容器在运行，怎样管理这些容器或服务之间的通信，包括服务间的负载均衡、流量管理、路由、运行状况监视、安全策略及服务间身份验证，就成为云原生技术的巨大挑战。以Istio为代表的服务网格应运而生。在架构上，Istio属于云原生技术的基础设施层，通过在容器旁提供一系列网络代理，来实现服务间的通信控制。其中的每个网络代理就是一个网关，管理容器或容器集群中每个服务间的请求或交互。每个网络代理还拦截服务请求分发到服务网格上，因此，众多服务构成的无数连接“编织“成网，也就有了“网格“这个概念。服务网格的中央控制器，在Kubernetes容器平台的帮助下，通过服务策略来控制和调整网络代理的功能，包括收集服务的性能指标。</p><ul><li>一句话总结：Istio是一个<strong>与Kubernetes紧密结合</strong>的<strong>适用于云原生场景</strong>的<strong>Service Mesh</strong>形态的用于服务治理的开放平台。</li></ul></div></div></div><figure><a class=lightgallery href=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg title=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg data-thumbnail=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg data-sub-html="<h2>Istio Architecture</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg data-srcset="https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg 1.5x, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg 2x" data-sizes=auto alt=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011254814.svg width=700px></a><figcaption class=image-caption>Istio Architecture</figcaption></figure><h2 id=istio能做什么>Istio能做什么?</h2><ol><li>Connect</li><li>Secure</li><li>Control</li><li>Observe</li></ol><h2 id=为什么需要istio>为什么需要Istio?</h2><p>我们需要解决服务治理问题。</p><p>服务治理的演化过程经历了三个阶段：</p><ol><li>在微服务程序中直接包含治理逻辑。这就会出现代码重复，维护困难，服务治理逻辑和业务逻辑紧耦合等等问题。</li><li>独立治理逻辑，SDK模式。将治理逻辑独立出来，形成类库，例如Spring Cloud Netflix Hystrix和Spring Cloud OpenFeign，我曾经使用过OpenFeign，使用起来也算开箱即用，只需在SpringBoot代码中的调用逻辑处添加@FeignClient和@EnableFeignClients注解即可，这种SDK模式的治理工具集在过去一段时间里得到了非常广泛的应用。虽然SDK模式在代码上解耦了业务和治理逻辑，但业务代码和SDK还是要一起编译的，业务代码和治理逻辑还在一个进程内。这就导致了几个问题：业务代码必须和SDK基于同一种语言，即语言绑定。例如，Spring Cloud等大部分治理框架都基于Java，因此只适用于Java语言开发的服务。并且在治理逻辑升级时，还需要用户的整个服务升级，即使业务逻辑没有改变。</li><li>治理逻辑独立的进程。SDK模式仍旧侵入了用户的代码，那就再解耦一层，把治理逻辑彻底从用户的业务代码中剥离出来，这就形成了Sidecar模式。</li></ol><figure><a class=lightgallery href=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png title=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png data-thumbnail=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png data-sub-html="<h2>Sidecar</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png data-srcset="https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png 1.5x, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png 2x" data-sizes=auto alt=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011435960.png width=700px></a><figcaption class=image-caption>Sidecar</figcaption></figure><div class="details admonition quote open"><div class="details-summary admonition-title"><i class="icon fas fa-quote-right fa-fw"></i>《云原生服务网格Istio：原理、实践、架构与源码解析》P12<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content><p>在云原生时代，随着采用各种语言开发的服务剧增，应用间的访问拓扑更加复杂，治理需求也越来越多。原来的那种嵌入在应用中的治理功能无论是从形态、动态性还是可扩展性来说都不能满足需求，迫切需要一种具备云原生动态、弹性特点的应用治理基础设施。</p><p>首先，从单个应用来看，Sidecar与应用进程的解耦带来的应用完全无侵入、开发语言无关等特点解除了开发语言的约束，从而极大降低了应用开发者的开发成本。这种方式经常被称为一种应用的基础设施层，类比TCP/IP网络协议栈，应用程序像使用TCP/IP一样使用这个通用代理：TCP/IP负责将字节码可靠地在网络节点间传递，Sidecar则负责将请求可靠地在服务间进行传递。TCP/IP面向的是底层的数据流，Sidecar则可以支持多种高级协议（HTTP、gRPC、HTTPS等），以及对服务运行时进行高级控制，使服务变得可监控、可管理。</p><p>然后，从全局来看，在多个服务间有复杂的互相访问时才有服务治理的需求。即我们关注的是这些Sidecar组成的网格，对网格内的服务间访问进行管理，应用还是按照本来的方式互相访问，每个程序的Inbound流量和Outbound流量都要经过Sidecar代理，并在Sidecar上执行治理动作。</p><p>最后，Sidecar是网格动作的执行体，全局的管理规则和网格内的元数据维护通过一个统一的控制面实现，只有数局面的Sidecar和控制面有联系，应用感知不到Sidecar更不会和控制面有任何联系，用户的业务和控制面彻底解耦。</p></div></div></div><h2 id=istio的缺点>Istio的缺点</h2><p>Istio的Sidecar架构引入了两个问题：</p><ul><li>增加了两处延迟和可能的故障点</li><li>多出来的这两跳对与访问性能、整体可靠性及整个系统的复杂度都带来了新的挑战。</li></ul><p><del>在云原生环境下需要考虑这点资源损耗吗🤪</del>，一般是通过保证转发代理的轻量和高性能降低时延影响（Istio选择了轻量级的<strong>envoy</strong>而不是nginx就是处于这个考虑），尤其是考虑到后端实际使用的应用程序一般比代理更重，叠加代理并不会明显影响应用的访问性能；另外，在云原生场景下，多扩展几个replica就行了。</p><h2 id=istio和kubernetes>Istio和Kubernetes</h2><p>之前在Service简记这篇文章中，我分析了Service实现的网络原理，可以明确的是k8s的Service已经可以提供服务注册、服务发现和负载均衡功能，并且可以通过服务名直接访问到服务实例（DNS）。为什么还是需要Istio呢？本质上来看，是因为k8s的Service只提供了OSI的4层负载均衡能力，无法基于应用层的信息进行负载均衡，不会提供应用层的流量管理，更不会提供服务访问指标和调用链追踪这种应用的服务运行诊断能力。但是要问到为什么不使用k8s的Ingress资源呢？Ingress不是也是可以提供7层的路由和负载均衡吗？个人认为Ingress主要提供了k8s集群南北流量的管理（Ingress Controller的实现主要采用Nginx），而Istio对容器注入的proxy更加细粒度的控制了k8s集群内的东西流量（proxy的实现是envoy)。</p><h2 id=istio小实践>Istio小实践</h2><h3 id=部署>部署</h3><p>以官方的<a href=https://istio.io/latest/zh/docs/setup/getting-started/#bookinfo target=_blank rel="noopener noreffer">Bookinfo</a>为示例，略过安装步骤。</p><figure><a class=lightgallery href=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg title=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg data-thumbnail=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg data-sub-html="<h2>Bookinfo</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg data-srcset="https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg 1.5x, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg 2x" data-sizes=auto alt=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011502736.svg width=700px></a><figcaption class=image-caption>Bookinfo</figcaption></figure><p>首先为想要实现Istio边车自动注入功能的命名空间打上标签<code>kubectl label namespace default istio-injection=enabled</code>，这样在该名称空间内的pod会被自动注入proxy。</p><p>然后部署Bookinfo应用<code>kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml</code>。</p><p>之后<code>kubectl get pods -n istio-system</code>可以看到
ingress、egress和istiod这三个pod，这就是Istio的控制平面，而且是以pod的形式存在的，可见Istio和k8s的结合十分紧密，Istio就是附加在k8s上的。</p><p>其他四个pod是之后部署的，都是用来Observe，从创建时间可以看出。<figure><a class=lightgallery href=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png title=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png data-thumbnail=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png data-sub-html="<h2>istio-system namespace</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png data-srcset="https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png 1.5x, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png 2x" data-sizes=auto alt=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011444752.png width=700px></a><figcaption class=image-caption>istio-system namespace</figcaption></figure><p>再看默认的名称空间，有六个pod，且每个pod里有两个容器。<figure><a class=lightgallery href=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png title=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png data-thumbnail=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png data-sub-html="<h2>default namespace</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png data-srcset="https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png 1.5x, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png 2x" data-sizes=auto alt=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011448071.png width=700px></a><figcaption class=image-caption>default namespace</figcaption></figure><p><code>kubectl describe pod productpage-v1-65b75f6885-qgnzd</code>可以看到</p><p>这个<code>productpage-v1-65b75f6885-qgnzd</code>pod中有本身的productpage容器还有istio/proxyv2，这个就是被自动注入的proxy，就是流量控制的实际执行者。<figure><a class=lightgallery href=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png title=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png data-thumbnail=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png data-sub-html="<h2>istio/proxyv2</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png data-srcset="https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png 1.5x, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png 2x" data-sizes=auto alt=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011455532.png width=700px></a><figcaption class=image-caption>istio/proxyv2</figcaption></figure><p>当我们向kube-apiserver提交一个网络策略时，时刻watch着api-server动向的Istio控制平面的istiod得知了这个消息，然后分发到各个被注入的pod的proxy容器（envoy）中，然后envoy加载网络策略并执行，这就是istio的实现机制。</p><p>进行完以上步骤之后再对外开放服务，添加一系列Observe组件等等一系列过程不再赘述。</p><h3 id=测试>测试</h3><p>在本地机器上执行脚本模拟请求</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>while</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>curl http://<span class=nv>$INGRESS_HOST</span>:<span class=nv>$INGRESS_PORT</span>/productpage
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>之后就可以在kiali这个观测平台上查看流量<figure><a class=lightgallery href=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png title=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png data-thumbnail=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png data-sub-html="<h2>kiali</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png data-srcset="https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png 1.5x, https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png 2x" data-sizes=auto alt=https://chengleqi-blog-image.oss-cn-hangzhou.aliyuncs.com/img/202204011511200.png width=700px></a><figcaption class=image-caption>kiali</figcaption></figure><h2 id=总结>总结</h2><p>Istio与Kubernetes的天然融合且基于Kubernetes构建，补齐了Kubernetes的治理能力，提供了端到端的服务运行治理平台。这都使得Istio、微服务、容器及Kubernetes形成一个完美的闭环。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-tag><span><a href=/tags/network/>Network</a></span></div><div class=post-info-line><div class=post-info-mod><span>更新于 2022-04-01</span></div><div class=post-info-mod></div></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://chengleqi.com/posts/22-02-28/ data-title=服务网格简记 data-via=star_wild_src data-hashtags=Network><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://chengleqi.com/posts/22-02-28/ data-hashtag=Network><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://chengleqi.com/posts/22-02-28/ data-title=服务网格简记><i class="fab fa-weibo fa-fw"></i></a><a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://chengleqi.com/posts/22-02-28/ data-title=服务网格简记><i class="fab fa-evernote fa-fw"></i></a></span></div></div><div class=post-nav><a href=/posts/22-02-10/ class=prev rel=prev title="k8s Service简记"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
<a href=/posts/22-03-16/ class=next rel=next title="Today is the big day!">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div></div><div id=comments class=single-card><div id=vssue></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://github.com/meteorlxy/vssue>Vssue</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.96.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/khusika/FeelIt target=_blank rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2021 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/>chengleqi</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-chevron-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment-alt fa-fw"></i></a></div><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><link rel=stylesheet href=/lib/vue/vssue/vssue.min.css><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script src=/lib/vue/vue.runtime.js></script><script src=/lib/vue/vssue/vssue.github.min.js></script><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js></script><script src=/lib/lazysizes/lazysizes.min.js></script><script src=/lib/twemoji/twemoji.min.js></script><script src=/lib/lightgallery/lightgallery.min.js></script><script src=/lib/lightgallery/lg-thumbnail.min.js></script><script src=/lib/lightgallery/lg-zoom.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/sharer/sharer.min.js></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{vssue:{clientID:"7e0e077deba6c51540c9",clientSecret:"02cc5e3df375e4da463c2137eed0ad7af6235272",owner:"chengleqi",repo:"vssue-comment",title:"服务网格简记"}},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},search:{algoliaAppID:"UEHJYEAUS7",algoliaIndex:"chengleqi-blog",algoliaSearchKey:"e4d8a33fb70564ca5dc114905aaeef08",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:30,type:"algolia"},twemoji:!0}</script><script src=/js/theme.min.js></script></body></html>